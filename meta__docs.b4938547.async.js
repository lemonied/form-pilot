"use strict";(self.webpackChunkform_pilot=self.webpackChunkform_pilot||[]).push([[904],{36818:function(L,_,r){var M;r.r(_),r.d(_,{demos:function(){return Z}});var c=r(15009),x=r.n(c),b=r(99289),C=r.n(b),V=r(67294),P=r(72569),S=r(86941),E=r(67191),y=r(98231),j=r(41686),Z={"docs-demo-demo-normalform":{component:V.memo(V.lazy(function(){return r.e(433).then(r.bind(r,31343))})),asset:{type:"BLOCK",id:"docs-demo-demo-normalform",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:r(98666).Z},react:{type:"NPM",value:"19.0.0"},"form-pilot":{type:"NPM",value:"0.0.1"},"./components/Input.tsx":{type:"FILE",value:r(31375).Z},"./components/Grid.tsx":{type:"FILE",value:r(62935).Z},"styled-components":{type:"NPM",value:"6.1.13"}},entry:"index.tsx"},context:{"./components/Input.tsx":E,"./components/Grid.tsx":y,react:M||(M=r.t(V,2)),"form-pilot":S,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Input.tsx":E,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Grid.tsx":y,"styled-components":j},renderOpts:{compile:function(){var K=C()(x()().mark(function T(){var w,A=arguments;return x()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,r.e(335).then(r.bind(r,37335));case 2:return D.abrupt("return",(w=D.sent).default.apply(w,A));case 3:case"end":return D.stop()}},T)}));function U(){return K.apply(this,arguments)}return U}()}},"docs-demo-demo-initialvalue":{component:V.memo(V.lazy(function(){return r.e(433).then(r.bind(r,14744))})),asset:{type:"BLOCK",id:"docs-demo-demo-initialvalue",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:r(47844).Z},react:{type:"NPM",value:"19.0.0"},"form-pilot":{type:"NPM",value:"0.0.1"},"./components/Grid.tsx":{type:"FILE",value:r(62935).Z},"./components/Input.tsx":{type:"FILE",value:r(31375).Z},"styled-components":{type:"NPM",value:"6.1.13"}},entry:"index.tsx"},context:{"./components/Grid.tsx":y,"./components/Input.tsx":E,react:M||(M=r.t(V,2)),"form-pilot":S,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Grid.tsx":y,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Input.tsx":E,"styled-components":j},renderOpts:{compile:function(){var K=C()(x()().mark(function T(){var w,A=arguments;return x()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,r.e(335).then(r.bind(r,37335));case 2:return D.abrupt("return",(w=D.sent).default.apply(w,A));case 3:case"end":return D.stop()}},T)}));function U(){return K.apply(this,arguments)}return U}()}}}},65438:function(L,_,r){var M;r.r(_),r.d(_,{demos:function(){return K}});var c=r(15009),x=r.n(c),b=r(99289),C=r.n(b),V=r(67294),P=r(83916),S=r(86941),E=r(98231),y=r(78944),j=r(67191),Z=r(41686),K={"docs-demo-validation-demo-validation":{component:V.memo(V.lazy(function(){return r.e(433).then(r.bind(r,34879))})),asset:{type:"BLOCK",id:"docs-demo-validation-demo-validation",refAtomIds:[],dependencies:{"index.tsx":{type:"FILE",value:r(86712).Z},react:{type:"NPM",value:"19.0.0"},"form-pilot":{type:"NPM",value:"0.0.1"},"../components/Grid.tsx":{type:"FILE",value:r(62935).Z},"../components/Item.tsx":{type:"FILE",value:r(75697).Z},"../components/Input.tsx":{type:"FILE",value:r(31375).Z},"styled-components":{type:"NPM",value:"6.1.13"}},entry:"index.tsx"},context:{"../components/Grid.tsx":E,"../components/Item.tsx":y,"../components/Input.tsx":j,react:M||(M=r.t(V,2)),"form-pilot":S,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Grid.tsx":E,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Item.tsx":y,"/home/runner/work/form-pilot/form-pilot/docs/examples/components/Input.tsx":j,"styled-components":Z},renderOpts:{compile:function(){var U=C()(x()().mark(function w(){var A,q=arguments;return x()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,r.e(335).then(r.bind(r,37335));case 2:return z.abrupt("return",(A=z.sent).default.apply(A,q));case 3:case"end":return z.stop()}},w)}));function T(){return U.apply(this,arguments)}return T}()}}}},60810:function(L,_,r){r.r(_),r.d(_,{demos:function(){return x}});var M=r(67294),c=r(25223),x={}},11171:function(L,_,r){r.r(_),r.d(_,{demos:function(){return x}});var M=r(67294),c=r(68537),x={}},98231:function(L,_,r){r.r(_),r.d(_,{Col:function(){return S},Row:function(){return P}});var M=r(68400),c=r.n(M),x=r(41686),b,C,V=function(y){return typeof y=="number"?"".concat(y,"px"):y},P=x.default.div(b||(b=c()([`
  display: flex;
  flex-wrap: wrap;
  align-items: `,`;
  justify-content: `,`;
  gap: `,`;
`])),function(E){var y;return(y=E.$align)!==null&&y!==void 0?y:"center"},function(E){var y;return(y=E.$justify)!==null&&y!==void 0?y:"unset"},function(E){var y;return(y=V(E.$gap))!==null&&y!==void 0?y:"unset"}),S=x.default.div(C||(C=c()([`
  flex: `,`;
`])),function(E){var y;return(y=E.$flex)!==null&&y!==void 0?y:"0 0 auto"})},67191:function(L,_,r){r.r(_),r.d(_,{Input:function(){return C}});var M=r(97857),c=r.n(M),x=r(67294),b=r(85893),C=function(P){var S=P;if("value"in P){var E;S=c()(c()({},P),{},{value:(E=P.value)!==null&&E!==void 0?E:""})}return(0,b.jsx)("input",c()({},S))}},78944:function(L,_,r){r.r(_);var M=r(97857),c=r.n(M),x=r(13769),b=r.n(x),C=r(67294),V=r(86941),P=r(85893),S=["label"];_.default=function(E){var y=E.label,j=b()(E,S),Z=V.default.useControl(E.control);return(0,P.jsxs)("div",{children:[!!y&&(0,P.jsx)("span",{style:{marginRight:8},children:y}),(0,P.jsx)(V.default.Item,c()(c()({},j),{},{control:Z})),(0,P.jsx)(V.default.Validation,{control:Z,children:function(U){var T;return(0,P.jsx)("div",{children:U==null||(T=U.results)===null||T===void 0?void 0:T.map(function(w,A){return(0,P.jsx)("span",{style:{color:w.type==="error"?"red":"orange"},children:w.message},A)})})}})]})}},86941:function(L,_,r){r.r(_),r.d(_,{Rules:function(){return pn},default:function(){return hn}});var M=r(97857),c=r.n(M),x=r(13769),b=r.n(x),C=r(67294),V=r(19632),P=r.n(V),S=r(15009),E=r.n(S),y=r(99289),j=r.n(y),Z=r(52677),K=r.n(Z),U=r(5574),T=r.n(U),w=r(12444),A=r.n(w),q=r(72004),D=r.n(q),z=r(9783),g=r.n(z),ee=function(e){if(typeof e!="undefined")return Array.isArray(e)?e.length?e:void 0:[e]},oe=function(e,n){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!n||t&&e.length!==n.length?!1:e.every(function(o,a){return o===n[a]})},fe=function(e){var n=ee(e),t=C.useRef(n);return(typeof n=="undefined"||typeof t.current=="undefined"||!oe(n,t.current,!0))&&(t.current=n),t.current},ae=function(){function l(){A()(this,l),g()(this,"listeners",[])}return D()(l,[{key:"add",value:function(n){var t=this;return this.listeners.push(n),function(){t.remove(n)}}},{key:"remove",value:function(n){var t=this.listeners.indexOf(n);t>-1&&this.listeners.splice(t,1)}},{key:"trigger",value:function(n){this.listeners.forEach(function(t){return t(n)})}}]),l}(),Fe=r(64599),ve=r.n(Fe);function be(l){return typeof l=="undefined"||l===null}function pe(l){if(l&&K()(l)==="object")return Array.isArray(l)?[]:{}}function H(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=l,t=!0,o=ve()(e),a;try{for(o.s();!(a=o.n()).done;){var i,m=a.value;if(t=!be(n)&&Object.prototype.hasOwnProperty.call(n,m),n=(i=n)===null||i===void 0?void 0:i[m],!t)break}}catch(v){o.e(v)}finally{o.f()}return[n,t]}function he(l){return Array.isArray(l)?P()(l):Object.assign({},l)}function ge(l){return typeof l=="number"?[]:{}}function _e(l,e,n){for(var t=he(l!=null?l:ge(e[0])),o=t,a=0;a<e.length;a+=1){var i,m=e[a];if(a===e.length-1)return o[m]=n,t;o[m]=he((i=o[m])!==null&&i!==void 0?i:ge(e[a+1])),o=o[m]}return t}function De(l,e,n){for(var t=n,o=n,a=0;a<e.length&&(a===0&&!t&&(t=pe(l),o=t),!!o);a+=1){var i=e[a],m=H(l,e.slice(0,a+1)),v=T()(m,2),h=v[0],u=v[1];if(a===e.length-1){u&&(o[i]=h);break}var f=H(n,e.slice(0,a+1)),d=T()(f,2),s=d[0],p=d[1];p?o[i]=s:u&&(o[i]=pe(h)),o=o[i]}return t}function Ce(l,e,n){if(e>l.length-1||n>l.length-1)throw new Error("Out of range");var t=l[e],o=l[n];return l[n]=t,l[e]=o,l}function xe(l){if(K()(l)!=="object"||l===null)return!1;var e=Object.getPrototypeOf(l);return e===Object.prototype||e===null}function Ve(l,e){return e&&e.target&&K()(e.target)==="object"&&l in e.target?e.target[l]:e}var B="_STORE_INTERNAL_TOKEN_",Ee=Symbol("control"),Te=function(){function l(){var e=this;A()(this,l),g()(this,"lock",!1),g()(this,"type","item"),g()(this,"parent",void 0),g()(this,"children",new Set),g()(this,"value",void 0),g()(this,"initialValue",void 0),g()(this,"namePaths",void 0),g()(this,"touched",!1),g()(this,"validator",function(){return Promise.resolve()}),g()(this,"validating",void 0),g()(this,"validationChange",new ae),g()(this,"validationErrors",void 0),g()(this,"valueChange",new ae),g()(this,"listChange",new ae),g()(this,"resetChange",new ae),g()(this,"stamp",void 0),g()(this,"_init",!1),g()(this,"setValidator",function(n){n?e.validator=n:e.validator=function(){return Promise.resolve()}}),g()(this,"getStrictValue",function(n){if(e.type==="item")return e.value;var t,o=n==null?void 0:n.map(ee),a=e.getInitializedValue(),i=function m(v){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];v.forEach(function(u){var f=[].concat(P()(h),P()(u.namePaths));u.type==="item"&&(!o||o.some(function(d){return!d||oe(d,f)}))&&(t=De(a,f,t)),m(u.children,f)})};return i(e.children),t}),g()(this,"getName",function(){if(e.parent)return e.namePaths}),g()(this,"getFullName",function(){if(e.parent)return[].concat(P()(e.parent.getFullName()||[]),P()(e.namePaths))}),g()(this,"triggerValidationChange",function(){e.validationChange.trigger(e.validating),e.validating?e.validating.catch(function(n){return e.validationErrors=n}):e.validationErrors=void 0}),g()(this,"validateByEvent",function(n){var t=typeof n=="function"?n:e.validator;e.validating=t(e.internalControl),e.triggerValidationChange()}),g()(this,"validateOptionalThrow",function(){var n=j()(E()().mark(function t(o){var a,i,m,v;return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return a=o||{},i=a.thrownTypes,m=i===void 0?["error"]:i,e.validating=e.validator(e.internalControl),e.triggerValidationChange(),u.prev=3,u.next=6,e.validating;case 6:u.next=13;break;case 8:if(u.prev=8,u.t0=u.catch(3),v=u.t0.filter(function(f){return m.includes(f.type)}),!v.length){u.next=13;break}throw v;case 13:case"end":return u.stop()}},t,null,[[3,8]])}));return function(t){return n.apply(this,arguments)}}()),g()(this,"validate",function(){var n=j()(E()().mark(function t(o){return E()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.validateOptionalThrow(o);case 2:return i.abrupt("return",e.getStrictValue());case 3:case"end":return i.stop()}},t)}));return function(t){return n.apply(this,arguments)}}()),g()(this,"clearValidation",function(){e.validating=void 0,e.triggerValidationChange(),e.children.forEach(function(n){return n.clearValidation()})}),g()(this,"validateFields",function(){var n=j()(E()().mark(function t(o,a){var i,m,v;return E()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return i=[],m=function f(d,s,p){var I=s==null?void 0:s.map(ee),O=p||{},G=O.recursive;if(!I){i.push(function(){return d.validateOptionalThrow(a)}),d.children.forEach(function(F){return f(F)});return}if(I.length){if(I.some(function(F){return!F})&&(i.push(function(){return d.validateOptionalThrow(a)}),G)){d.children.forEach(function(F){return f(F)});return}d.children.forEach(function(F){var R=I.filter(function($){return oe(F.namePaths,$)});f(F,R.map(function($){return $.slice(F.namePaths.length)}),p)})}},m(e,o,a),u.next=5,Promise.all(i.map(function(f){return f().catch(function(d){return d})}));case 5:if(v=u.sent.filter(Boolean),!v.length){u.next=8;break}throw v;case 8:return u.abrupt("return",e.getStrictValue(o));case 9:case"end":return u.stop()}},t)}));return function(t,o){return n.apply(this,arguments)}}()),g()(this,"getValidationErrors",function(){var n,t=((n=e.validationErrors)===null||n===void 0?void 0:n.slice())||[];if(e.children.forEach(function(o){var a=o.getValidationErrors();a&&t.push.apply(t,P()(a))}),t.length)return t}),g()(this,"manualSetValue",function(n){return e.setData({value:n}),e.clearValidation(),e.value}),g()(this,"setFieldValue",function(n,t){var o=ee(n);if(!(!o||e.type==="item")){var a=e.get(o);a?a.setValue(t):e.setData({value:_e(e.getInitializedValue(),o,t)})}}),g()(this,"isTouched",function(){return e.type==="item"||e.touched?e.touched:Array.from(e.children).some(function(n){return n.isTouched()})}),g()(this,"reset",function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;e.setData({value:e.getInitialValue(),preventCapturing:!0,preventBubbling:n}),e.resetChange.trigger(),e.touched=!1,e.children.forEach(function(t){return t.reset(!0)})}),g()(this,"triggerReset",function(){e.reset(),e.clearValidation()}),g()(this,"add",function(n,t){if(e.type!=="list")throw new Error("".concat(e.type," has no method add."));e.listChange.trigger({type:"add",value:n,insertIndex:t})}),g()(this,"remove",function(n){if(e.type!=="list")throw new Error("".concat(e.type," has no method remove."));e.listChange.trigger({type:"remove",index:n})}),g()(this,"move",function(n,t){if(e.type!=="list")throw new Error("".concat(e.type," has no method move."));e.listChange.trigger({type:"move",from:n,to:t})}),g()(this,"get",function(n){var t=ee(n);if(t){for(var o=0,a=Array.from(e.children);o<a.length;o++){var i=a[o];if(oe(i.namePaths,t)){var m=i.get(t.slice(i.namePaths.length));if(m)return m}}return}return e.internalControl}),g()(this,"control",{getValue:function(){return e.value},getStrictValue:this.getStrictValue,getName:this.getName,getFullName:this.getFullName,setValue:this.manualSetValue,setFieldValue:this.setFieldValue,isTouched:this.isTouched,reset:this.triggerReset,validate:this.validate,validateFields:this.validateFields,getValidationErrors:this.getValidationErrors,clearValidation:this.clearValidation,add:this.add,remove:this.remove,move:this.move,get:this.get}),g()(this,"internalControl",c()(c()({},this.control),{},g()({getStore:function(t){if(t===B)return e;throw new Error("For internal use only")}},Ee,!0)))}return D()(l,[{key:"init",value:function(n){this.initialValue=n.value,!this._init&&(this.namePaths=n.namePaths,this.parent?this.setData({value:H(this.parent.value,this.namePaths)[0]}):this.setData({value:this.getInitialValue()}),this._init=!0)}},{key:"getInitialValue",value:function(){return this.parent?H(this.parent.getInitialValue(),this.namePaths)[0]:this.initialValue}},{key:"getInitializedValue",value:function(){return this.type==="list"&&!Array.isArray(this.value)?[]:this.type==="group"&&!xe(this.value)?Object.assign({},this.value):this.value}},{key:"setNamePaths",value:function(n){this.namePaths=n,this.parent&&this.setData({value:H(this.parent.value,this.namePaths)[0]})}},{key:"setData",value:function(n){var t=this;if(!this.lock){this.lock=!0;var o=n.eventInterceptor,a=n.preventCapturing,i=n.preventBubbling,m=n.value,v=this.value,h=[];if(!i&&this.parent&&!this.parent.lock){var u=this.parent.value,f=H(this.parent.value,this.namePaths),d=T()(f,1),s=d[0];Object.is(s,m)||(u=_e(this.parent.getInitializedValue(),this.namePaths,m)),this.parent.setData({value:u,eventInterceptor:function(I){h.push(I)}})}this.value=m,Object.is(this.value,v)||(h.push(function(){return t.valueChange.trigger({newValue:m,oldValue:v})}),a||this.children.forEach(function(p){p.lock||p.setData({value:H(t.value,p.namePaths)[0],eventInterceptor:function(O){h.push(O)}})})),typeof o=="function"?o(function(){return h.forEach(function(p){return p()})}):h.forEach(function(p){return p()}),this.lock=!1}}}]),l}();function Le(l){return!!l&&K()(l)==="object"&&!!l[Ee]}function je(l,e){return l.replace(/\\?\$\{\w+\}/g,function(n){var t;if(n.startsWith("\\"))return n.slice(1);var o=n.slice(2,-1);return"".concat((t=e[o])!==null&&t!==void 0?t:"")})}var ne=D()(function l(e){A()(this,l),g()(this,"message",void 0),g()(this,"variable",void 0),Object.assign(this,e)}),le=function(){function l(e){var n=this;A()(this,l),g()(this,"defaultMessage",void 0),g()(this,"setDefaultMessage",function(t){n.defaultMessage=t}),this.defaultMessage=e}return D()(l,[{key:"factory",value:function(n){var t=this,o=function a(){var i=n.apply(void 0,arguments),m=c()(c()({},i),{},{validator:function(){var v=j()(E()().mark(function u(f){var d;return E()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,p.next=3,i.validator(f);case 3:return p.abrupt("return",p.sent);case 6:if(p.prev=6,p.t0=p.catch(0),!(p.t0 instanceof Error)){p.next=10;break}throw p.t0;case 10:throw d=function(){if(p.t0 instanceof ne){var I;return typeof p.t0.message=="string"?p.t0.message:je(t.defaultMessage,c()({name:(I=f.getFullName())===null||I===void 0?void 0:I.join(",")},p.t0.variable))}return typeof p.t0=="string"?p.t0:"".concat(p.t0)}(),new Error(d);case 12:case"end":return p.stop()}},u,null,[[0,6]])}));function h(u){return v.apply(this,arguments)}return h}()});return Object.defineProperty(m,"__internal_mark__",{get:function(){return a}}),m};return o.setDefaultMessage=this.setDefaultMessage,Object.defineProperty(o,"defaultMessage",{get:function(){return t.defaultMessage}}),o.isProduced=function(a){return(a==null?void 0:a.__internal_mark__)===o},o}}]),l}(),de=D()(function l(e){A()(this,l),g()(this,"type",void 0),g()(this,"message",void 0),g()(this,"control",void 0),Object.assign(this,e)}),ye=function(){var l=j()(E()().mark(function e(n){var t,o,a,i,m,v,h,u,f=arguments;return E()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(t=f.length>1&&f[1]!==void 0?f[1]:"serial",o=f.length>2?f[2]:void 0,!o){s.next=35;break}if(a=function(){var p=j()(E()().mark(function I(O){var G;return E()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return R.prev=0,R.next=3,O.validator(n);case 3:R.next=9;break;case 5:return R.prev=5,R.t0=R.catch(0),G=R.t0 instanceof Error?R.t0.message:"".concat(R.t0),R.abrupt("return",new de({type:O.type||"error",message:G,control:n}));case 9:case"end":return R.stop()}},I,null,[[0,5]])}));return function(O){return p.apply(this,arguments)}}(),i=[],t!=="serial"){s.next=30;break}m=ve()(o),s.prev=7,m.s();case 9:if((v=m.n()).done){s.next=20;break}return h=v.value,s.next=13,a(h);case 13:if(u=s.sent,!(u instanceof de)){s.next=18;break}if(i.push(u),u.type!=="error"){s.next=18;break}return s.abrupt("break",20);case 18:s.next=9;break;case 20:s.next=25;break;case 22:s.prev=22,s.t0=s.catch(7),m.e(s.t0);case 25:return s.prev=25,m.f(),s.finish(25);case 28:s.next=33;break;case 30:return s.next=32,Promise.all(o.map(a));case 32:i=s.sent.filter(function(p){return p instanceof de});case 33:if(!(i.length>0)){s.next=35;break}throw i;case 35:case"end":return s.stop()}},e,null,[[7,22,25,28]])}));return function(n){return l.apply(this,arguments)}}(),W=r(85893),$e=["name","root","control"],te=C.createContext(void 0),Ae=["independentControl"],Q=function(e){var n=C.useRef(void 0),t=C.useRef(e);if(t.current!==e)throw new Error('Parameter "control" cannot be variable.');return n.current||(e?n.current=e:n.current=new Te().internalControl),n.current},Pe=function(e){var n=e.children,t=e.control,o=e.initialValue,a=e.namePaths,i=e.rules,m=e.ref,v=C.useRef({}),h=C.useContext(te)||{},u=h.parent,f=h.validateMode,d=u==null?void 0:u.getStore(B),s=t.getStore(B);return s.parent=d,s.init({value:o,namePaths:a}),s.setValidator(function(){var p=j()(E()().mark(function I(O){return E()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,ye(O,f,i);case 2:return F.abrupt("return",F.sent);case 3:case"end":return F.stop()}},I)}));return function(I){return p.apply(this,arguments)}}()),C.useEffect(function(){if(s.stamp||(s.stamp=v.current),s.stamp!==v.current)throw new Error('"control" cannot be attached to multiple components at the same time');return function(){s.stamp=void 0}},[s]),C.useEffect(function(){return d==null||d.children.add(s),s.parent=d,function(){s.parent=void 0,d==null||d.children.delete(s)}},[s,d]),C.useEffect(function(){a!==s.namePaths&&s.setNamePaths(a)},[s,a]),C.useImperativeHandle(m,function(){return t}),n},Se=function(e){var n=e.control,t=e.namePaths,o=e.validateTrigger,a=e.validateMode,i=C.useContext(te),m=C.useMemo(function(){var v=i||{},h=v.collection,u=h===void 0?[]:h,f=v.namePathList,d=f===void 0?[]:f,s=v.validateMode,p=v.validateTrigger,I=u[u.length-1];return n.getStore(B).type!=="item"&&(u=[].concat(P()(u),[n]),d=[].concat(P()(d),[t])),{control:n,collection:u,parent:I,namePathList:d,validateTrigger:o||p,validateMode:a||s}},[i,n,t,a,o]);return(0,W.jsx)(te.Provider,{value:m,children:(0,W.jsx)(Pe,c()({},e))})},we=function(e){var n=e.name,t=e.root,o=e.control,a=b()(e,$e),i=a.validateMode,m=a.validateTrigger,v=fe(n),h=Q(o),u=C.useMemo(function(){return{control:h,collection:[h],namePathList:[],validateMode:i,validateTrigger:m}},[h,i,m]);return t||!v?(0,W.jsx)(te.Provider,{value:u,children:(0,W.jsx)(Pe,c()(c()({},a),{},{control:h,namePaths:Ae}))}):(0,W.jsx)(Se,c()(c()({},a),{},{control:h,namePaths:v}))},ie=we,Be=["control"],We=function(e){var n=e.control,t=b()(e,Be),o=Q(n);return o.getStore(B).type="group",(0,W.jsx)(ie,c()(c()({},t),{},{control:o,root:!1}))},Ke=We,Ie=function(){return C.useContext(te)||{}},ue=function(e){var n=Ie(),t=n.collection,o=n.control;return e&&t?t[0]:o},re=function(e){var n=C.useRef(e);n.current!==e&&console.warn('Parameter "control" cannot be variable.');var t=ue();return n.current||t},Ue=["control","children"],se=function(e){return e.map(function(n,t){return c()(c()({},n),{},{name:t})})},Ne=function(e){var n=e.children,t=ue(),o=t.getStore(B),a=C.useRef(-1),i=C.useState(function(){var u=t.getValue()||[];return u.map(function(f,d){return{name:d,key:++a.current}})}),m=T()(i,2),v=m[0],h=m[1];return C.useEffect(function(){return o.listChange.add(function(u){var f=P()(o.value||[]);switch(o.touched=!0,u.type){case"add":{var d=typeof u.insertIndex=="number"?u.insertIndex:f.length;h(function(s){var p=P()(s);return p.splice(d,0,{name:p.length,key:++a.current}),se(p)}),f.splice(d,0,u.value),o.setData({value:f,preventCapturing:!0});break}case"remove":{h(function(s){var p=P()(s);return p.splice(u.index,1),se(p)}),f.splice(u.index,1),o.setData({value:f,preventCapturing:!0});break}case"move":{h(function(s){return se(Ce(P()(s),u.from,u.to))}),Ce(f,u.from,u.to),o.setData({value:f,preventCapturing:!0});break}}o.validateOptionalThrow()})},[o]),C.useEffect(function(){return o.valueChange.add(function(u){var f=u.newValue,d=u.oldValue,s=(f==null?void 0:f.length)||0,p=(d==null?void 0:d.length)||0;s!==p&&h(function(I){var O=I;if(O.length>s)O=O.slice(0,s);else if(O.length<s){O=P()(O);for(var G=O.length;G<s;G+=1)O.push({name:G,key:++a.current})}return se(O)})})},[o]),n(v,t)},Ge=function(e){var n=e.control,t=e.children,o=b()(e,Ue),a=Q(n);return a.getStore(B).type="list",(0,W.jsx)(ie,c()(c()({},o),{},{control:a,root:!1,children:(0,W.jsx)(Ne,{children:t})}))},Ze=Ge,ce=function(e,n){var t=re(n),o=C.useRef(e);o.current=C.useMemo(function(){return e},[e]),C.useEffect(function(){return t==null?void 0:t.getStore(B).valueChange.add(function(a){return o.current(a)})},[t])};function Re(l,e){var n=void 0,t=void 0,o=C.useRef(void 0);e&&(n=e),Le(l)?n=l:typeof l=="function"?o.current=l:t=l;var a=re(n),i=fe(t),m=C.useCallback(function(){return o.current?o.current(a.getValue()):i?H(a.getValue(),i)[0]:a.getValue()},[i,a]),v=C.useState(function(){return m()}),h=T()(v,2),u=h[0],f=h[1];return C.useEffect(function(){f(m())},[a,m]),ce(function(){var d=m();Object.is(u,d)||f(d)},a),u}var ze=["control","children","valuePropName","rules"],He=function(e){var n=e.element,t=e.restProps,o=Re();return C.cloneElement(n,c()(c()({},t),{},{value:o}))},ke=function(e){var n=e.children,t=e.valuePropName,o=t===void 0?"value":t,a=e.rules,i=a===void 0?[]:a,m=ue(),v=Ie(),h=v.validateTrigger,u=h===void 0?"onChange":h,f=v.validateMode,d=m.getStore(B);return C.Children.map(n,function(s,p){if(p===0&&C.isValidElement(s)){var I=s,O=i.map(function(R){var $=R.validateTrigger||u;return c()(c()({},R),{},{validateTrigger:Array.isArray($)?$:[$]})}),G=Array.from(new Set([u].concat(P()(O.map(function(R){return R.validateTrigger}))).flat(1))),F=G.reduce(function(R,$){return R[$]=function(){var k,X;d.validateByEvent(j()(E()().mark(function gn(){return E()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,ye(m,f,O.filter(function(_n){return _n.validateTrigger.includes($)}));case 2:return Y.abrupt("return",Y.sent);case 3:case"end":return Y.stop()}},gn)})));for(var J=arguments.length,Me=new Array(J),me=0;me<J;me++)Me[me]=arguments[me];return(k=(X=I.props)[$])===null||k===void 0?void 0:k.call.apply(k,[X].concat(Me))},R},{onChange:I.props.onChange});return(0,W.jsx)(He,{element:I,restProps:c()(c()({},F),{},{onChange:function(){var $;d.touched=!0;for(var k=arguments.length,X=new Array(k),J=0;J<k;J++)X[J]=arguments[J];return d.setData({value:Ve(o,X[0])}),($=F.onChange)===null||$===void 0?void 0:$.call.apply($,[F].concat(X))}})},"inputRender")}return s})},Je=function(e){var n=e.control,t=e.children,o=e.valuePropName,a=e.rules,i=b()(e,ze),m=C.useState(0),v=T()(m,2),h=v[0],u=v[1],f=Q(n),d=f.getStore(B);return d.type="item",C.useEffect(function(){return d.resetChange.add(function(){u(function(s){return s+1})})},[d]),(0,W.jsx)(ie,c()(c()({},i),{},{rules:a,control:f,root:!1,children:(0,W.jsx)(ke,{valuePropName:o,rules:a,children:t},h)}))},Qe=Je,Oe=function(e){var n=re(e),t=C.useRef(void 0),o=C.useState({}),a=T()(o,2),i=a[1],m=C.useRef({status:"init"});return C.useEffect(function(){var v=function(d){var s;d.status!==((s=m.current)===null||s===void 0?void 0:s.status)&&(m.current=d,i({}))},h=n==null?void 0:n.getStore(B),u=function(d){t.current=d,d?(v(c()(c()({},m.current),{},{status:"pending"})),d.then(function(){t.current===d&&v({status:"fulfilled"})}).catch(function(s){t.current===d&&v({status:"rejected",results:s})})):v({status:"init"})};return u(h==null?void 0:h.validating),h==null?void 0:h.validationChange.add(u)},[n]),m.current},Xe=function(e){var n=e.control,t=e.children,o=re(n),a=Oe(o);return t(a,o)},Ye=function(e){var n=e.children,t=e.condition,o=e.control,a=re(o),i=C.useState({}),m=T()(i,2),v=m[1];return ce(function(h){var u=h.oldValue,f=h.newValue;(typeof t=="function"&&t(f,u)||typeof t=="undefined")&&v({})},a),n(a)},qe=["initialValues","control"],N=function(e){var n=e.initialValues,t=e.control,o=b()(e,qe),a=Q(t);return a.getStore(B).type="group",(0,W.jsx)(ie,c()(c()({},o),{},{control:a,name:void 0,initialValue:n,root:!0}))};N.Item=Qe,N.Group=Ke,N.List=Ze,N.useControl=Q,N.useOnValueChange=ce,N.useWatch=Re,N.useControlInstance=ue,N.useValidation=Oe,N.Validation=Xe,N.Update=Ye;var en=N,nn=["message"],tn=new le('"${name}" is required'),rn=tn.factory(function(l){var e=l||{},n=e.message,t=b()(e,nn);return c()(c()({},t),{},{validator:function(a){var i=a.getValue();return typeof i=="undefined"||i===null||i===""||Array.isArray(i)&&i.length===0?Promise.reject(new ne({message:n})):Promise.resolve()}})}),on=["message"],an=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,ln=new le('"${name}" is not a valid email'),un=ln.factory(function(l){var e=l||{},n=e.message,t=b()(e,on);return c()(c()({},t),{},{validator:function(a){var i=a.getValue();return an.test(i)?Promise.resolve():Promise.reject(new ne({message:n}))}})}),sn=["message"],mn=["message"],dn=new le('"${name}" can contain up to ${length} characters'),cn=dn.factory(function(l,e){var n=e||{},t=n.message,o=b()(n,sn);return c()(c()({},o),{},{validator:function(i){var m=i.getValue();return(typeof m=="string"||Array.isArray(m))&&m.length>l?Promise.reject(new ne({message:t,variable:{length:l}})):Promise.resolve()}})}),fn=new le('"${name}" must be at least ${length} characters'),vn=fn.factory(function(l,e){var n=e||{},t=n.message,o=b()(n,mn);return c()(c()({},o),{},{validator:function(i){var m=i.getValue(),v=typeof m=="string"||Array.isArray(m)?m.length:"".concat(m!=null?m:"").length;return v<l?Promise.reject(new ne({message:t,variable:{length:l}})):Promise.resolve()}})}),pn={required:rn,email:un,maxLength:cn,minLength:vn},hn=en},58351:function(L,_,r){r.r(_),r.d(_,{texts:function(){return c}});var M=r(72569);const c=[]},16216:function(L,_,r){r.r(_),r.d(_,{texts:function(){return c}});var M=r(83916);const c=[]},87799:function(L,_,r){r.r(_),r.d(_,{texts:function(){return c}});var M=r(25223);const c=[{value:"This is a guide example.",paraId:0}]},51446:function(L,_,r){r.r(_),r.d(_,{texts:function(){return c}});var M=r(68537);const c=[{value:"form-pilot",paraId:0}]},86712:function(L,_){_.Z=`import React from 'react';
import Form, { Rules } from 'form-pilot';
import Item from '../components/Item';
import { Input } from '../components/Input';
import { Row, Col } from '../components/Grid';

export default () => {

  const form = Form.useControl();

  return (
    <Row $gap={6}>
      <Form control={form}>
        <Col $flex="0 0 100%">
          <Item
            name="username"
            label="Username"
            rules={[
              Rules.required(),
              Rules.maxLength(5, {
                type: 'warning',
              }),
            ]}
          >
            <Input />
          </Item>
        </Col>
        <Col $flex="0 0 100%">
          <Item
            name="email"
            label="Email"
            rules={[
              Rules.email(),
            ]}
          >
            <Input />
          </Item>
        </Col>
      </Form>
      <Col $flex="0 0 100%">
        <Row $gap={6}>
          <button
            type="button"
            onClick={async () => {
              const values = await form.validateFields();
              // eslint-disable-next-line no-console
              console.log(values);
            }}
          >\u63D0\u4EA4</button>
          <button
            type="button"
            onClick={async () => {
              form.reset();
            }}
          >\u91CD\u7F6E</button>
          <button
            type="button"
            onClick={async () => {
              form.clearValidation();
            }}
          >\u6E05\u9664\u6821\u9A8C</button>
        </Row>
      </Col>
    </Row>
  );
};
`},47844:function(L,_){_.Z=`import React from 'react';
import Form from 'form-pilot';
import { Input } from './components/Input';
import { Col, Row } from './components/Grid';

export default () => {

  const control = Form.useControl();

  return (
    <>
      <Row $gap={8}>
        {new Date().toLocaleString()}
        <Form control={control}>
          <Form.Group name="info">
            <Col $flex="0 0 100%">
              <Form.Item
                name="username"
                initialValue="\u9ED8\u8BA4\u503C username"
              >
                <Input placeholder="username" />
              </Form.Item>
            </Col>
            <Col>
              <Form.Item
                name="age"
                initialValue="\u9ED8\u8BA4\u503C 18"
              >
                <Input placeholder="age" />
              </Form.Item>
            </Col>
          </Form.Group>
        </Form>
        <Col $flex="0 0 100%">
          <Row $gap={8}>
            <button
              onClick={() => {
                // eslint-disable-next-line no-console
                console.log(control.getValue());
              }}
              type="button"
            >control.getValue()</button>
            <button
              onClick={() => {
                // eslint-disable-next-line no-console
                console.log((control as any).getStore('_STORE_INTERNAL_TOKEN_'));
              }}
              type="button"
            >control.getStore()</button>
            <button
              onClick={() => control.reset()}
              type="button"
            >reset</button>
          </Row>
        </Col>
      </Row>
    </>
  );
};
`},98666:function(L,_){_.Z=`import React from 'react';
import Form from 'form-pilot';
import { Col, Row } from './components/Grid';
import { Input } from './components/Input';

export default () => {

  const control = Form.useControl();
  
  const usernameControl = Form.useControl();
  const username = Form.useWatch(usernameControl);
  const values = Form.useWatch(control);
  const independentControl = Form.useControl();

  return (
    <>
      <div>
        {new Date().toLocaleString()}
        <Form
          control={control}
          initialValues={{
            username: '\u9ED8\u8BA4\u503C root',
            password: 'password',
            extra: {
              a: 1,
              b: 2,
            },
          }}
        >
          <Row $gap={8}>
            <Col $flex="0 0 33.3%">
              <Form.Item
                name="username"
                control={usernameControl}
                initialValue="\u9ED8\u8BA4\u503C"
              >
                <Input placeholder="username" />
              </Form.Item>
              {username}
            </Col>
            <Col $flex="0 0 33.3%">
              <Form.Item
                name="password"
              >
                <Input placeholder="password" />
              </Form.Item>
            </Col>
            <Col $flex="0 0 33.3%">
              <Form.Item
                name={['name', 'first']}
              >
                <Input placeholder="name, first" />
              </Form.Item>
            </Col>
            <Col $flex="0 0 33.3%">
              <Form.Item
                name={['name', 'last']}
              >
                <Input placeholder="name, last" />
              </Form.Item>
            </Col>
            <Col $flex="0 0 33.3%">
              <Form.Group
                name={'detail'}
              >
                <Form.Item name="age">
                  <Input placeholder="detail, age" />
                </Form.Item>
              </Form.Group>
            </Col>
            <Col $flex="0 0 33.3%">
              <Form.Item name={['detail', 'introduce']}>
                <Input placeholder="detail, introduce" />
              </Form.Item>
            </Col>
            <Col $flex="0 0 100%">
              <Form.List
                name="list"
              >
                {
                  (fields, { add, remove }) => {
                    return (
                      <Row $gap={8}>
                        {
                          fields.map(field => {
                            return (
                              <Form.Group key={field.key} name={field.name}>
                                <Col $flex="0 0 100%">
                                  <Row $gap={8}>
                                    <Col $flex="0 0 200px">
                                      <Form.Item
                                        name="prefix"
                                      >
                                        <Input placeholder="prefix" style={{ width: '100%' }} />
                                      </Form.Item>
                                    </Col>
                                    <Col>
                                      <button
                                        onClick={() => remove(field.name)}
                                        type="button"
                                      >\u5220\u9664</button>
                                    </Col>
                                  </Row>
                                </Col>
                              </Form.Group>
                            );
                          })
                        }
                        <Col $flex="0 0 100%">
                          <button
                            onClick={() => add()}
                            type="button"
                          >Add</button>
                        </Col>
                      </Row>
                    );
                  }
                }
              </Form.List>
            </Col>
            <div>
              <Form.Item control={independentControl}>
                <Input placeholder="\u72EC\u7ACB\u53D7\u63A7\uFF08\u8131\u79BBForm\uFF09" />
              </Form.Item>
              <button
                onClick={() => independentControl.setValue('independentControl')}
                type="button"
              >independentControl</button>
            </div>
          </Row>
        </Form>
      </div>
      <div>
        {
          JSON.stringify(values, null, 2)
        }
      </div>
      <div>
        <div>
          <button
            onClick={() => {
              // eslint-disable-next-line no-console
              console.log(control.getValue());
            }}
            type="button"
          >control.getValue()</button>
          <button
            onClick={() => {
              // eslint-disable-next-line no-console
              console.log(control.getStrictValue());
            }}
            type="button"
          >control.getStrictValue()</button>
          <button
            onClick={() => control.reset()}
            type="button"
          >reset</button>
          <button
            onClick={() => control.setFieldValue(['list'], [{ prefix: '123' }])}
            type="button"
          >setFieldValue</button>
        </div>
      </div>
    </>
  );
};
`},62935:function(L,_){_.Z=`import type React from 'react';
import styled from 'styled-components';

const number2string = (input?: number | string) => {
  if (typeof input === 'number') {
    return \`\${input}px\`;
  }
  return input;
};

interface RowProps {
  $align?: React.CSSProperties['alignItems'];
  $justify?: React.CSSProperties['justifyContent'];
  $gap?: React.CSSProperties['gap'];
}
export const Row = styled.div<RowProps>\`
  display: flex;
  flex-wrap: wrap;
  align-items: \${props => props.$align ?? 'center'};
  justify-content: \${props => props.$justify ?? 'unset'};
  gap: \${props => number2string(props.$gap) ?? 'unset'};
\`;

interface ColProps {
  $flex?: React.CSSProperties['flex'];
}
export const Col = styled.div<ColProps>\`
  flex: \${props => props.$flex ?? '0 0 auto'};
\`;
`},31375:function(L,_){_.Z=`import React from 'react';

export const Input = (props: React.DetailedHTMLProps<React.InputHTMLAttributes<HTMLInputElement>, HTMLInputElement>) => {

  let mergedProps = props;

  if ('value' in props) {
    mergedProps = {
      ...props,
      value: props.value ?? '',
    };
  }

  return (
    <input {...mergedProps} />
  );
};
`},75697:function(L,_){_.Z=`import React from 'react';
import Form from 'form-pilot';
import type { FormItemProps } from 'form-pilot';

interface ItemProps extends FormItemProps {
  label?: React.ReactNode;
}
export default (props: ItemProps) => {

  const { label, ...restProps } = props;

  const control = Form.useControl(props.control);

  return (
    <div>
      {
        !!label && (
          <span style={{ marginRight: 8 }}>{label}</span>
        )
      }
      <Form.Item
        {...restProps}
        control={control}
      />
      <Form.Validation
        control={control}
      >
        {
          (validation) => {
            return (
              <div>
                {
                  validation?.results?.map((result, index) => {
                    return (
                      <span
                        key={index}
                        style={{
                          color: result.type === 'error' ? 'red' : 'orange',
                        }}
                      >{result.message}</span>
                    );
                  })
                }
              </div>
            );
          }
        }
      </Form.Validation>
    </div>
  );
};
`}}]);
